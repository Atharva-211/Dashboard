(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2232:function(e,s,r){Promise.resolve().then(r.bind(r,6528))},6528:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return Dashboard}});var t=r(7437),a=r(2265),l=r(4829);let i=l.Z.create({baseURL:"http://localhost:5001",timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{var s;return console.log("Making ".concat(null===(s=e.method)||void 0===s?void 0:s.toUpperCase()," request to: ").concat(e.url)),e},e=>(console.error("Request error:",e),Promise.reject(e))),i.interceptors.response.use(e=>e,e=>{var s;throw console.error("API Error:",(null===(s=e.response)||void 0===s?void 0:s.data)||e.message),e});let UserService=class UserService{static async getUsers(){try{let e=await i.get("/users");if(e.data.success&&e.data.data)return e.data.data.users;throw Error(e.data.error||"Failed to fetch users")}catch(e){throw console.error("Error fetching users:",e),this.handleApiError(e)}}static async getUserById(e){try{let s=await i.get("/users/".concat(e));if(s.data.success&&s.data.data)return s.data.data;throw Error(s.data.error||"Failed to fetch user")}catch(e){throw console.error("Error fetching user:",e),this.handleApiError(e)}}static async createUser(e){try{let s=await i.post("/users",e);if(s.data.success&&s.data.data)return s.data.data;throw Error(s.data.error||"Failed to create user")}catch(e){throw console.error("Error creating user:",e),this.handleApiError(e)}}static async updateUser(e,s){try{let r=await i.put("/users/".concat(e),s);if(r.data.success&&r.data.data)return r.data.data;throw Error(r.data.error||"Failed to update user")}catch(e){throw console.error("Error updating user:",e),this.handleApiError(e)}}static async deleteUser(e){try{let s=await i.delete("/users/".concat(e));if(!s.data.success)throw Error(s.data.error||"Failed to delete user")}catch(e){throw console.error("Error deleting user:",e),this.handleApiError(e)}}static handleApiError(e){if(l.Z.isAxiosError(e)){var s,r,t;return{message:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.error)||e.message,code:e.code,details:null===(t=e.response)||void 0===t?void 0:t.data}}return{message:e.message||"An unexpected error occurred"}}};var n=r(1865),d=r(8110),o=r(3449);let c=o.z.object({id:o.z.string().optional(),name:o.z.string().min(2,"Name must be at least 2 characters"),email:o.z.string().email("Invalid email format"),age:o.z.number().min(1,"Age must be at least 1").max(120,"Age must be less than 120"),department:o.z.string().min(2,"Department must be at least 2 characters"),role:o.z.string().min(2,"Role must be at least 2 characters"),createdAt:o.z.string().optional(),updatedAt:o.z.string().optional()}),UserForm=e=>{let{user:s,onSubmit:r,onCancel:a,isLoading:l=!1}=e,{register:i,handleSubmit:o,formState:{errors:m,isSubmitting:x},reset:h}=(0,n.cI)({resolver:(0,d.F)(c.omit({id:!0,createdAt:!0,updatedAt:!0})),defaultValues:s?{name:s.name,email:s.email,age:s.age,department:s.department,role:s.role}:{name:"",email:"",age:0,department:"",role:""}}),handleFormSubmit=async e=>{try{await r(e),s||h()}catch(e){console.error("Form submission error:",e)}};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:s?"Edit User":"Add New User"}),(0,t.jsxs)("form",{onSubmit:o(handleFormSubmit),className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,t.jsx)("input",{...i("name"),type:"text",id:"name",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(m.name?"border-red-500":"border-gray-300"),placeholder:"Enter full name"}),m.name&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,t.jsx)("input",{...i("email"),type:"email",id:"email",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(m.email?"border-red-500":"border-gray-300"),placeholder:"Enter email address"}),m.email&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Age *"}),(0,t.jsx)("input",{...i("age",{valueAsNumber:!0}),type:"number",id:"age",min:"1",max:"120",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(m.age?"border-red-500":"border-gray-300"),placeholder:"Enter age"}),m.age&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.age.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department *"}),(0,t.jsxs)("select",{...i("department"),id:"department",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(m.department?"border-red-500":"border-gray-300"),children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),(0,t.jsx)("option",{value:"Engineering",children:"Engineering"}),(0,t.jsx)("option",{value:"Marketing",children:"Marketing"}),(0,t.jsx)("option",{value:"Sales",children:"Sales"}),(0,t.jsx)("option",{value:"HR",children:"Human Resources"}),(0,t.jsx)("option",{value:"Finance",children:"Finance"}),(0,t.jsx)("option",{value:"Operations",children:"Operations"})]}),m.department&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.department.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,t.jsx)("input",{...i("role"),type:"text",id:"role",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(m.role?"border-red-500":"border-gray-300"),placeholder:"Enter job role"}),m.role&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.role.message})]}),(0,t.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:x||l,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x||l?(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s?"Updating...":"Creating..."]}):s?"Update User":"Create User"}),(0,t.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"Cancel"})]})]})]})},UserList=e=>{let{users:s,onEdit:r,onDelete:a,isLoading:l=!1}=e,handleDelete=e=>{window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&a(e.id)};return l?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-12 bg-gray-200 rounded"},s))})]})}):0===s.length?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Get started by adding your first user."})]})}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["Users (",s.length,")"]})}),(0,t.jsx)("div",{className:"md:hidden",children:s.map(e=>(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 last:border-b-0",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>r(e),className:"text-primary-600 hover:text-primary-800 text-sm font-medium",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>handleDelete(e),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Age:"})," ",e.age]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Dept:"})," ",e.department]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Role:"})," ",e.role]})]})]},e.id))}),(0,t.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.age})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-primary-100 text-primary-800",children:e.department})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.role})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{onClick:()=>r(e),className:"text-primary-600 hover:text-primary-900 transition-colors",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>handleDelete(e),className:"text-red-600 hover:text-red-900 transition-colors",children:"Delete"})]})})]},e.id))})]})})]})};function Dashboard(){let[e,s]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[i,n]=(0,a.useState)(null),[d,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{fetchUsers()},[]);let fetchUsers=async()=>{try{l(!0),n(null);let e=await UserService.getUsers();s(e)}catch(e){n(e.message||"Failed to fetch users"),console.error("Error fetching users:",e)}finally{l(!1)}},handleCreateUser=async e=>{try{h(!0);let r=await UserService.createUser(e);s(e=>[...e,r]),o(!1),n(null)}catch(e){throw n(e.message||"Failed to create user"),e}finally{h(!1)}},handleUpdateUser=async e=>{if(null==c?void 0:c.id)try{h(!0);let r=await UserService.updateUser(c.id,e);s(e=>e.map(e=>e.id===c.id?r:e)),m(null),o(!1),n(null)}catch(e){throw n(e.message||"Failed to update user"),e}finally{h(!1)}},handleDeleteUser=async e=>{try{h(!0),await UserService.deleteUser(e),s(s=>s.filter(s=>s.id!==e)),n(null)}catch(e){n(e.message||"Failed to delete user")}finally{h(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Dashboard"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your organization's users with full CRUD operations"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Total Users: ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:e.length})]}),!d&&(0,t.jsx)("button",{onClick:()=>{m(null),o(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors",children:"Add User"})]})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-red-700",children:i})]}),(0,t.jsx)("div",{className:"ml-auto pl-3",children:(0,t.jsxs)("button",{onClick:()=>n(null),className:"text-red-400 hover:text-red-600",children:[(0,t.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,t.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),d&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(UserForm,{user:c||void 0,onSubmit:c?handleUpdateUser:handleCreateUser,onCancel:()=>{o(!1),m(null)},isLoading:x})}),(0,t.jsx)(UserList,{users:e,onEdit:e=>{m(e),o(!0)},onDelete:handleDeleteUser,isLoading:r}),!r&&(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("button",{onClick:fetchUsers,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,t.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})})]}),(0,t.jsx)("footer",{className:"bg-white border-t mt-12",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)("div",{className:"text-center text-sm text-gray-500",children:[(0,t.jsx)("p",{children:"User Dashboard - Built with Next.js, TypeScript, and Tailwind CSS"}),(0,t.jsx)("p",{className:"mt-1",children:"Connected to Google Cloud Functions API"})]})})})]})}}},function(e){e.O(0,[513,971,472,744],function(){return e(e.s=2232)}),_N_E=e.O()}]);